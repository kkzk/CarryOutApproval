フルスタックエンジニアとして以下の仕様に沿ったアプリケーションを作成する。

# システムの目的

ファイルを外部に持ち出す前に上司の承認を受けるワークフローを実現する。

# システムの利用者（ユーザ）

- 申請者
  ファイルの持出申請を行うユーザ。申請者には所属を示す所属コードがあり、ファイルの持出先の識別に使用する。
  承認者である場合もある。

- 承認者
  承認依頼に対して許可または拒否を決定する。

- 管理者
  承認フローの進捗状況を把握し、証跡の確認を行える。

# システムの実装

## ソフトウェアスタック

クラウドサービスを使用しない。Windows Server 上のでの動作を条件とする。
ただし、開発用にWindows11でも動作すること。

- DBサーバ。持出申請の状態の管理、ユーザの操作履歴を証跡として管理するために使用する。PostgreSQLがインストール済みであることを仮定してよい。開発中は sqlite でのモックアップを用意すること。

- WebAPサーバ。アプリケーションのロジックを実装する。バックエンドフレームワークはメンテナンスが容易なものを選択すること。
  フロントエンドのフレームワークはユーザビリティを重視。ファイルのサムネイル表示ができるものが望ましい。

- Webブラウザ。ユーザが使用する。Edgeでの操作を前提とすること。

- ストレージサービス。持出申請対象のファイルを保存する。ファイルシステムを使用するか、または S3 互換の minio の使用を前提としてもよい。

- バックエンドに Python を使用する場合、仮想環境管理には uv を使用します。

- コマンドの指定は Powershell を使用します。 `.ps1` ファイルを作成するときは BOM 付きの UTF-8 ファイルにします。

- ポート 3000 は使用中です。 React 開発サーバのポートは 3001 を使用してください。

## 開発時の注意

サーバプロセスの起動と停止は vscode の デバッガの機能（launch.json）を使用してください。
個別のコマンドでの起動は避け、統合された開発環境としてVS Codeの機能を最大限活用すること。

### デバッグ設定
- バックエンド（Python）とフロントエンド（React）は、それぞれ別々のデバッグ設定で管理する
- launch.jsonを使用してワンクリックで起動・停止を行う
- 複数のプロセスを同時に管理するためにcompound設定も使用する

### フロントエンド技術スタック
- React 18 with TypeScript
- Material-UI (MUI) for UI components
- @hello-pangea/dnd for drag and drop functionality (React 18 StrictMode compatible)
- Axios for API communication

## 画面仕様

画面全体を１つのカンバンボードで表現する。

**カンバンボードの構成**:
- 3列のカンバン方式でドラッグアンドドロップによる操作が可能
- カンバン方式のボードでは、以下の４列を表示する：
  1. **自分が提出した申請**: 自分が提出する申請。一番上に新規作成用のボタンを表示する。
  2. **自分が担当する申請**: 自分が承認者として指定され、status が 'pending' の申請
  3. **承認済み**: 自分が承認者として承認した申請（status が 'approved'）
  4. **拒否**: 自分が承認者として拒否した申請（status が 'rejected'）

申請の追加時には以下の項目を入力する。

- ファイル。アップロードする。
- コメント。持出理由を入力する。
- 承認者。誰が承認するかを指定する。

**操作仕様**:
- 「自分が担当する申請」列の申請カードのみドラッグ可能。ドラッグ先は「承認済み」または「拒否」のみ。
- 「自分が担当する申請」の申請を「承認済み」列にドラッグしても即座に承認されず、ダイアログでの確認が必要
- 「拒否」列にドラッグした場合も、ダイアログで拒否理由の入力を必須とする
- 申請カードをクリックすると詳細ダイアログが開き、申請者情報、ファイル名、持出理由などを確認可能

# 外部との連携

利用者のIDは REST API で存在が確認できることを前提としてよい。
開発用にモックアップを用意すること。

承認を受けたファイルは外部連携用の CIFS 共有にファイルを配置する。このとき、申請者の所属コードを付帯情報として識別できるようにすること。

# ユーザビリティについて

感覚的な操作を実現するために、カンバン方式での許可・不許可を指示できること。
また、一覧表示も可能にすること。
